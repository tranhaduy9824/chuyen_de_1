<!DOCTYPE html>
<!--
Template: Metronic Frontend Freebie - Responsive HTML Template Based On Twitter Bootstrap 3.3.4
Version: 1.0.0
Author: KeenThemes
Website: http://www.keenthemes.com/
Contact: support@keenthemes.com
Follow: www.twitter.com/keenthemes
Like: www.facebook.com/keenthemes
Purchase Premium Metronic Admin Theme: http://themeforest.net/item/metronic-responsive-admin-dashboard-template/4021469?ref=keenthemes
-->
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<!--<![endif]-->

<!-- Head BEGIN -->
<head>
<meta charset="utf-8">
<title>Smart Shop</title>

<meta content="width=device-width, initial-scale=1.0" name="viewport">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

<meta content="Metronic Shop UI description" name="description">
<meta content="Metronic Shop UI keywords" name="keywords">
<meta content="keenthemes" name="author">

<meta property="og:site_name" content="-CUSTOMER VALUE-">
<meta property="og:title" content="-CUSTOMER VALUE-">
<meta property="og:description" content="-CUSTOMER VALUE-">
<meta property="og:type" content="website">
<meta property="og:image" content="-CUSTOMER VALUE-">
<!-- link to image for socio -->
<meta property="og:url" content="-CUSTOMER VALUE-">

<link rel="shortcut icon" href="favicon.ico">

<script
	src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.slim.min.js"></script>
<script
	src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
<!-- Global styles START -->
<link th:href="@{/assets/plugins/font-awesome/css/font-awesome.min.css}"
	rel="stylesheet">
<link th:href="@{/assets/plugins/bootstrap/css/bootstrap.min.css}"
	rel="stylesheet">
<!-- Global styles END -->
<!-- <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css"> -->
<!-- <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script> -->
<!-- <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> -->
<link rel="stylesheet"
	th:href="@{/assets/corporate/css/extend/profile.css}">
<!-- <script src="assets/plugins/jquery.min.js" type="text/javascript"></script>
    <script src="assets/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>    -->
<!-- Theme styles START -->
<!-- Theme styles START -->
<link th:href="@{/assets/pages/css/components.css}" rel="stylesheet">
<link th:href="@{/assets/pages/css/slider.css}" rel="stylesheet">
<link th:href="@{/assets/pages/css/style-shop.css}" rel="stylesheet"
	type="text/css">
<link th:href="@{/assets/corporate/css/style.css}" rel="stylesheet">
<link th:href="@{/assets/corporate/css/style-responsive.css}"
	rel="stylesheet">
<link th:href="@{/assets/corporate/css/themes/red.css}" rel="stylesheet"
	id="style-color">
<link th:href="@{/assets/corporate/css/custom.css}" rel="stylesheet">
<!-- Theme styles END -->
<style type="text/css">
input[type=checkbox], input[type=radio] {
	margin: 0;
}
</style>
</head>
<!-- Head END -->

<!-- Body BEGIN -->
<body class="ecommerce">
	<!-- BEGIN TOP BAR -->
	<div th:replace="fragment/app/top-bar.html :: top-bar"></div>
	<!-- END TOP BAR -->

	<!-- BEGIN HEADER -->
	<div th:replace="fragment/app/header.html :: header"></div>
	<!-- Header END -->
	<div class="container emp-profile"
		style="margin-top: 50px; box-shadow: 0 0 30px black;">
		<form method="post">
			<div class="row">
				<div class="col-md-4">
					<div class="profile-img">
						<img
							src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS52y5aInsxSm31CvHOFHWujqUx_wWTS9iM6s7BAm21oEN_RiGoog"
							alt="" /> <a class="file btn btn-lg btn-primary"> Change
							Photo <input type="file" name="file" />
						</a>
					</div>
				</div>
				<div class="col-md-6">
					<div class="profile-head">
						<h5 th:text="${user.fullname}"></h5>

						<h6 sec:authorize="hasRole('CUSTOMER')">Khách Hàng</h6>
						<h6 sec:authorize="hasRole('SHOP')">Nhà Bán Hàng</h6>
						<a sec:authorize="!hasRole('SHOP')" class="btn btn-primary"
							th:href="@{/user/register-shop}">Đăng kí nhà bán hàng</a>
						<p class="proile-rating">
							Điểm: <span>100/1000</span>
						</p>
						<ul class="nav nav-tabs" id="myTab" role="tablist"
							style="display: flex;">
							<li class="nav-item active"><a class="nav-link active"
								id="home-tab" data-toggle="tab" href="#home" role="tab"
								aria-controls="home" aria-selected="true">Thông tin</a></li>
							<li class="nav-item"><a class="nav-link" id="profile-tab"
								data-toggle="tab" href="#profile" role="tab"
								aria-controls="profile" aria-selected="false">Cập nhật thông
									tin</a></li>
							<li class="nav-item"><a class="nav-link"
								id="update-pass-tab" data-toggle="tab" href="#update-password"
								role="tab" aria-controls="profile" aria-selected="false">Đổi
									mật khẩu</a></li>
						</ul>
					</div>
				</div>

			</div>
			<div class="row">
				<div class="col-md-4 col-sm-5 col-xs-12">
					<div class="profile-work">
						<a class="btn btn-link" th:href="@{/home}">Trang chủ</a><a
							class="btn btn-link" th:href="@{/order/history}">Đơn hàng của
							bạn</a><a class="btn btn-link" th:href="@{/shop/home}"
							sec:authorize="hasRole('SHOP')">Trang quản trị cửa hàng</a> <a
							class="btn btn-link" th:href="@{/admin/home}" sec:authorize="hasRole('ADMIN')">Trang
							quản trị admin</a> <a class="btn btn-link" th:href="@{/logout}">Đăng
							xuất</a>
					</div>
				</div>
				<div class="col-md-8 col-sm-7 col-xs-12">
					<div class="tab-content profile-tab" id="myTabContent">
						<div class="tab-pane fade active in" id="home" role="tabpanel"
							aria-labelledby="home-tab">
							<div class="row">
								<div class="col-md-6">
									<label>Mã khách hàng</label>
								</div>
								<div class="col-md-6">
									<p th:text="${user.id}">Kshiti123</p>
								</div>
							</div>
							<div class="row">
								<div class="col-md-6">
									<label>Họ và tên</label>
								</div>
								<div class="col-md-6">
									<p th:text="${user.fullname}">Kshiti Ghelani</p>
								</div>
							</div>
							<div class="row">
								<div class="col-md-6">
									<label>Email</label>
								</div>
								<div class="col-md-6">
									<p th:text="${user.email}">kshitighelani@gmail.com</p>
								</div>
							</div>
							<div class="row">
								<div class="col-md-6">
									<label>Số điện thoại</label>
								</div>
								<div class="col-md-6">
									<p th:text="${user.phone}">123 456 7890</p>
								</div>
							</div>
							<div class="row">
								<div class="col-md-6">
									<label>Giới tính</label>
								</div>
								<div class="col-md-6">
									<p th:text="${user.gender!=null ? user.gender.vi:''}"></p>
								</div>
							</div>
							<div class="row">
								<div class="col-md-6">
									<label>Ngày sinh</label>
								</div>
								<div class="col-md-6">
									<p th:text="${user.birthday}"></p>

								</div>
							</div>
							<div class="row">
								<div class="col-md-6">
									<label>Địa chỉ</label>
								</div>
								<div class="col-md-6">
									<p th:if="${user.addresses.size()==0}">Chưa có địa chỉ</p>
									<p th:each="address: ${user.addresses}"
										th:if="${address.mode.toString()=='DEFAULT'}"
										th:text="${address.address + ', '+address.city.cityName}"></p>

								</div>
							</div>
						</div>
						<div class="tab-pane fade" id="profile" role="tabpanel"
							aria-labelledby="profile-tab">
							<form th:action="@{/user/profile}" method="post"
								th:object="${user}">
								<input type="text" th:field="*{id}" hidden="true" />
								<div class="form-group row">
									<label for="staticEmail"
										class="col-sm-6 col-form-label text-primary">Thông Tin</label>
								</div>
								<div class="form-group row">
									<label for="staticEmail" class="col-sm-2 col-form-label">Họ
										và Tên</label>
									<div class="col-sm-10">
										<input type="text" class="form-control" th:field="*{fullname}" />
									</div>
								</div>
								<div class="form-group row">
									<label class="col-sm-2 col-form-label">Giới tính</label>
									<div class="col-sm-10">
										<label class="radio-inline"><input type="radio"
											name="gender" value="MALE"
											th:checked="*{gender!=null && gender.toString()=='MALE'}">Nam</label>
										<label class="radio-inline"><input type="radio"
											name="gender" value="FEMALE"
											th:checked="*{gender!=null && gender.toString()=='FEMALE'}">Nữ</label>
										<label class="radio-inline"><input type="radio"
											name="gender" value="OTHER"
											th:checked="*{gender!=null && gender.toString()=='OTHER'}">Khác</label>
									</div>
								</div>
								<div class="form-group row">
									<label for="inputPassword" class="col-sm-2 col-form-label">Ngày
										sinh</label>
									<div class="col-sm-10">
										<input type="date" class="form-control" name="birthday"
											th:value="*{birthday}">
									</div>
								</div>
								<div class="form-group row" id="addressList">
									<label class="col-xs-12 col-form-label" id="optionsAddress">Địa
										chỉ <a class="btn-link" onclick="showFormAddress()"><i
											class="fa fa-plus"></i>Thêm địa chỉ</a>
									</label>
									<div class="form-address col-xs-12"
										th:each="address,i : *{addresses}">
										<input th:name="${'addresses['+i.index+'].id'}"
											th:value="${address.id}" hidden="true">
										<div class="col-md-1 col-sm-12" style="padding-bottom: 10px">
											<label class="radio-inline"><input type="radio"
												name="address"
												th:checked="${address.mode.toString()=='DEFAULT'}"
												th:value="${i.index}"></label>
										</div>
										<div class="col-md-6 col-sm-7" style="padding: 2px">
											<input type="text" placeholder="Địa chỉ nơi ở"
												required="required"
												th:name="${'addresses['+i.index+'].address'}"
												th:value="${address.address}" class="form-control col-sm-6">
										</div>
										<div class="col-md-5 col-sm-5" style="padding: 2px">
											<select class="form-control" required="required"
												th:name="${'addresses['+i.index+'].city'}"
												style="font-family: sans-serif;">
												<option value="">Tỉnh/Thành phố</option>
												<option th:each="city : ${cities}" th:value="${city}"
													th:text="${city.cityName}"
													th:selected="${city==address.city}"></option>
											</select>
										</div>
										<a class="btn-link" onclick="lessFormAddress(this)"><i
											class="fa fa-minus-circle"></i>Xóa địa chỉ</a>

									</div>

								</div>
								<div class="form-group row">
									<div style="float: right">
										<input class="btn btn-primary" type="submit" value="Cập nhật">
									</div>
								</div>
							</form>

						</div>
						<div class="tab-pane fade" id="update-password" role="tabpanel"
							aria-labelledby="update-pass-tab">
							<form id="changePasswordForm"
								th:action="@{/user/profile/new-pasword}" method="post"
								th:object="${user}">
								<div class="form-group row">
									<label class="col-sm-6 col-form-label text-primary">Thay
										đổi mật khẩu</label>
								</div>
								<div class="form-group row">
									<label for="inputPassword" class="col-sm-2 col-form-label">Mật
										khẩu cũ</label>
									<div class="col-sm-10">
										<input type="password" class="form-control" name="oldPass"
											placeholder="Mật khẩu cũ" />
									</div>
								</div>
								<div class="form-group row">
									<label for="inputPassword" class="col-sm-2 col-form-label">Mật
										khẩu</label>
									<div class="col-sm-10">
										<input type="password" class="form-control" name="newPass"
											placeholder="Mật khẩu mới" />
									</div>
								</div>
								<div class="form-group row">
									<label for="inputPassword" class="col-sm-2 col-form-label">Xác
										nhận mật khẩu</label>
									<div class="col-sm-10">
										<input type="password" class="form-control" name="confirmPass"
											placeholder="Xác nhận mật khẩu" />
									</div>
								</div>
								<div class="form-group row">
									<div class="col-sm-10" style="float: right">
										<input class="btn btn-primary" type="submit" value="Xác nhận">
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</form>
	</div>
	<div id="form-clone" style="display: none;"
		class="form-address col-xs-12">
		<div class="col-md-1 col-sm-12" style="padding-bottom: 10px">
			<label class="radio-inline"><input type="radio"
				name="address" checked="checked" value="0"></label>
		</div>
		<div class="col-md-6 col-sm-7" style="padding: 2px">
			<input type="text" placeholder="Địa chỉ nơi ở" required="required"
				name="addresses[0].address" value="" class="form-control col-sm-6">
		</div>
		<div class="col-md-5 col-sm-5" style="padding: 2px">
			<select class="form-control" name="addresses[0].city"
				required="required" style="font-family: sans-serif;">
				<option value="">Tỉnh/Thành phố</option>
				<option th:each="city : ${cities}" th:value="${city}"
					th:text="${city.cityName}"></option>
			</select>
		</div>
		<a class="btn-link" onclick="lessFormAddress(this)"><i
			class="fa fa-minus-circle"></i>Xóa địa chỉ</a>

	</div>

	<!-- BEGIN STEPS -->
	<div th:replace="fragment/app/steps.html :: steps"></div>
	<!-- END STEPS -->


	<!-- BEGIN FOOTER -->
	<div th:replace="fragment/app/footer.html :: footer"></div>
	<!-- FOOTER END -->
	<!-- Load javascripts at bottom, this will reduce page load time -->
	<!-- BEGIN CORE PLUGINS (REQUIRED FOR ALL PAGES) -->
	<!--[if lt IE 9]>
    <script src="assets/plugins/respond.min.js"></script>  
    <![endif]-->
	<script th:src="@{/assets/plugins/jquery.min.js}"
		type="text/javascript"></script>
	<script th:src="@{/assets/plugins/bootstrap/js/bootstrap.min.js}"
		type="text/javascript"></script>

	<script th:inline="javascript">
	let form = document.getElementById("changePasswordForm");
	form.addEventListener("submit", (e) => {
		  e.preventDefault();
			const password = document.querySelector('input[name=newPass]');
			const confirm = document.querySelector('input[name=confirmPass]');
			if (confirm.value === password.value) {
				form.submit()
				console.log(password)
			} else {
				
				alert("Mật khẩu không khớp!")
				
			}

		});
	var countAddress = /*[[${user.addresses.size()}]]*/
	function showFormAddress(){
		console.log(countAddress)
		let formAddress= $("#form-clone").first().clone(true);
		formAddress.attr("style","dislay:block")
		formAddress.find('input[hidden="true"]').remove()
		let address= formAddress.find('input[type="text"]');
		let city=formAddress.find('select');
		formAddress.find('input[type="radio"]').val(countAddress);
		address.attr('name','addresses['+countAddress+'].address')
		address.val('')
		city.attr('name','addresses['+countAddress+'].city')
		city.prop("selectedIndex", 0);
		formAddress.find('input[type="radio"]').prop("checked",false);
		
		$("#addressList").append(formAddress)
		countAddress++;
	}
	function lessFormAddress(e){
		$(e).parent().remove()
		countAddress--;
	}
	</script>

</body>
<!-- END BODY -->
</html>